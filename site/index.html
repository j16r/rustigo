<!doctype html>

<html lang="en" style="height: 100%">
  <head>
    <meta charset="utf-8">

    <title>Go</title>
    <meta name="description" content="Go">
    <style>

#board {
  border: 1px black solid;
}

#board div {
  display: block;
  height: 64px;
}

#board span {
  display: inline-block;
  height: 64px;
  width: 64px;
}

#board span.odd {
  background: #000;
}

#board span.even {
  background: #fff;
}
    </style>

    <script>
var uri = window.location;
var new_uri;
if (uri.protocol === "https:") {
  new_uri = "wss:";
} else {
  new_uri = "ws:";
}
new_uri += "//" + uri.hostname + ":3012";
new_uri += uri.pathname + "/ws";

var socket = new WebSocket(new_uri);
socket.onmessage = function(event) {
  console.log(event.data);
}

window.onload = function() {
  let hash = document.location.hash;
  if(hash !== '') {
    drawBoard(hash.substring(1));
  } else {
    document.getElementById('menu').style.cssText = 'display: block';
  }
};

let drawBoard = function(size) {
  let menu = document.getElementById('menu');
  menu.style.cssText = 'display: none';
  document.getElementById('game').style.cssText = 'display: block';

  let board = document.getElementById('board');
  for(let y = 0; y < size; y++) {
    let row = board.appendChild(document.createElement('div'));
    for(let x = 0; x < size; x++) {
      let tile = document.createElement('span');
      if((x & 1) == (y & 1)) {
        tile.className = 'odd';
      } else {
        tile.className = 'even';
      }
      row.appendChild(tile);
    }
  }
};

let beginGame = function() {
  let checked = document.querySelector('input[name=size]:checked');
  if(checked) {
    document.location.hash = checked.value;
    drawBoard(checked.value);
  }
};
    </script>
  </head>

  <body style="height: 100%; margin: 0">

    <section style="display: flex; align-items: center; justify-content: center; height: 100%; padding: 0; margin: 0">
      <form id="menu" style="display: none">
        <input type="radio" name="size" value="9">9x9</input>
        <input type="radio" name="size" value="13">13x13</input>
        <input type="radio" name="size" value="17">17x17</input>
        <input type="radio" name="size" value="19">19x19</input>
        <input type="button" value="Begin game" onclick="beginGame();" keydown="beginGame();">
      </form>

      <div id="game" style="display: none;">
        <section id="board" style="height: 100%">
        </section>
      </section>
    </section>

  </body>
</html>
